# ========== Core Settings ==========
unbind C-b
set -g prefix None 
set -g mouse on
set -g focus-events on
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:Tc"
set -g terminal-overrides ',*:kLFT5=\EL'
set -g base-index 1
set -g set-clipboard on         # Use system clipboard
set -g detach-on-destroy off    # Don't exit from tmux when closing a session
set -g escape-time 0            # Remove delay for exiting insert mode with ESC in Neovim
set -g history-limit 1000000    # Increase history size (from 2,000)
set -g status-interval 3        # Update the status bar every 3 seconds (default: 15 seconds)
set -g allow-passthrough on     # Allow programs in the pane to bypass tmux (e.g. for image preview)
set -g status-position top

# ========== Reload Config ==========
bind -n M-R source-file ~/.tmux.conf \; display-message "Reloaded!"

# ========== Alt-based Multiplexing (WezTerm-style) ==========
# Pane navigation
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Also allow arrow keys with Alt
bind -n M-Left select-pane -L
bind -n M-Down select-pane -D
bind -n M-Up select-pane -U
bind -n M-Right select-pane -R

# Split panes (Alt+Shift+H/V)
bind -n M-H split-window -h
bind -n M-V split-window -v

# New and close tabs (tmux “windows”)
bind -n M-c new-window
bind -n M-q confirm-before -p "Close tab? (y/n)" kill-window

# Switch tabs (Alt+Shift+J/K)
bind -n M-J next-window
bind -n M-K previous-window

# Rename current tab
bind -n M-r command-prompt -I "#S" "rename-session '%%'"
# show active sessions
bind -n M-s choose-session

# Copy mode
bind -n M-Space copy-mode

bind -n M-S new-session


# display a floating window
bind-key -n M-t display-popup -E "$SHELL"

# Jump directly to tab numbers (Alt+1..8)
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8


# ========== Tokyo Night Theme ==========
bg="#1a1b26"
default_fg="#c0caf5"
session_fg="#7aa2f7"
session_selection_fg="#1a1b26"
session_selection_bg="#bb9af7"
active_window_fg="#7dcfff"
active_pane_border="#565f89"

set -g status-left-length 200
set -g status-right-length 200
set -g status-left "#[fg=${session_fg},bold,bg=${bg}]  #S #[fg=${default_fg},nobold,bg=${bg}] | "
set -g status-justify left
set -g status-style "bg=${bg}"
set -g window-status-format "#[fg=${default_fg},bg=default] #I:#W"
set -g window-status-current-format "#[fg=${active_window_fg},bold,bg=default]  #[underscore]#I:#W"
set -g window-status-last-style "fg=${default_fg},bg=default"
set -g message-command-style "bg=default,fg=${default_fg}"
set -g message-style "bg=default,fg=${default_fg}"
set -g mode-style "bg=${session_selection_bg},fg=${session_selection_fg}"
set -g pane-active-border-style "fg=${active_pane_border},bg=default"
set -g pane-border-style "fg=#3b4261,bg=default"
